{% extends 'reports/_layout.html' %}

{% block content %}
	<h3>Money</h3>

{% if dancers %}
	<table class="widefat page fixed report">
		<thead>
			<tr>
				<th class="manage-column column-title" width="18%">Name</th>
{% for item in items %}
				<th class="manage-column">{{ item.name }}</th>
{% endfor %}
				<th class="manage-column">Total</th>
				<th class="manage-column">Method</th>
			</tr>
		</thead>

		<tfoot>
			<tr>
				<th class="manage-column column-title">Name</th>
{% for item in items %}
				<th class="manage-column">{{ item.name }}</th>
{% endfor %}
				<th class="manage-column">Total</th>
				<th class="manage-column">Method</th>
			</tr>
		</tfoot>

		<tbody>
{% for dancer in dancers if dancer.price_total %}
			<tr {{- cycle(['', ' class="alternate"'], loop.index) | raw }}>
				<td class="column-title"><a href="{{ request_href ~ 'report_dancer' ~ '&dancer_id=' ~ dancer.id }}">{{ dancer.name_last_first }}</a></td>
{% for item in items %}
				<td>{% set price = attribute(dancer, 'price_for_registered_item', [item.id]) %}{% if price %}${{ price }}{% endif %}</td>
{% endfor %}
				<td>${{ dancer.price_total }}</td>
				<td>{{ dancer.payment_method }}</td>
			</tr>

{% endfor %}
			<tr style="background-color: rgba(0, 255, 0, 0.1);">
				<td class="column-title"><strong>Total<strong></td>
{% for item in items %}
				<td>${{ item.total_money_from_registrations }}</td>
{% endfor %}
				<td>${{ event.total_money_from_registrations }}</td>
				<td>&mdash;</td>
			</tr>
		</tbody>
	</table>
{% else %}
	<p>There are no registered dancers for this event.</p>
{% endif %}
{% endblock content %}
